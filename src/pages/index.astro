---
import { supabase } from '../db/supabase';
const { data } = await supabase.from("userInformation").select();

// LINEログイン
const client_id = process.env.LINE_CLIENT_ID;
const redirect_url = "https://line-astro-supabase-87bbqc3c8-takumakoikes-projects.vercel.app/";

const login_url = `https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${client_id}&redirect_uri=${redirect_url}&state=12345abcde&scope=profile%20openid&nonce=09876xyz`
---

<html lang="en">	
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
		<h1>LINEログイン</h1>

		<p>現在ログインしていません。<br>ログインすると↓にメッセージが表示されます</p>
		
		<p>LINEでログインしています！おめでとう！</p>


		<a href={login_url}>LINEでログインしてみる</a>

		{
			<ul>
				{data && data.map((item) => (
					<li>{item.name}</li>
				))}
			</ul>
		}

		<script src="../js/login.js"></script>
	</body>
</html>
